# ABOUT REGULAR EXPRESSIONS

Regular expressions can be used in any stringr function in a pattern argument

# Lecture 1
library(rebus)
library(stringr)
# Some strings to practice with
x <- c("cat", "coat", "scotland", "tic toc")
# Print END
END
# Run me
str_view(x, pattern = START %R% "c")
# Match the strings that start with "co" 
str_view(x, pattern = START %R% "co")
# Match the strings that end with "at"
str_view(x, pattern =  "at" %R% END)
# Match the strings that is exactly "cat"
str_view(x, pattern = START %R% "cat" %R%  END)

# Lecture 2
x <- c("cat", "coat", "scotland", "tic toc")
# Match any character followed by a "t"
str_view(x, pattern = ANY_CHAR %R% "t")
# Match a "t" followed by any character
str_view(x, pattern = "t" %R% ANY_CHAR)
# Match two characters
str_view(x, pattern = ANY_CHAR %R% ANY_CHAR)
# Match a string with exactly three characters
str_view(x, pattern = START %R% ANY_CHAR %R% ANY_CHAR %R% ANY_CHAR %R% END)

# Lecture 3
# q followed by any character
pattern <- "q" %R% ANY_CHAR
# Test pattern 
str_view(c("Quentin", "Kaliq", "Jacques",  "Jacqes"), pattern)  
# Find names that have the pattern
names_with_q <- str_subset(boy_names, pattern = pattern)
length(names_with_q)
# Find part of name that matches pattern
part_with_q <- str_extract(boy_names, pattern = pattern)
table(part_with_q) #qa qe qi qm qo qu // 1  1  2  2  1 89
# Did any names have the pattern more than once?
count_of_q <- str_count(boy_names, pattern = pattern)
table(count_of_q)
# Which babies got these names?
with_q <- str_detect(boy_names, pattern = pattern)
# What fraction of babies got these names?
mean(with_q)

# Lecture 4
# Match Jeffrey or Geoffrey
whole_names <- or("Jeffrey", "Geoffrey")
str_view(boy_names, pattern = whole_names,   match = TRUE)
# Match Jeffrey or Geoffrey, another way
common_ending <- or("Je", "Geo") %R% "ffrey"
str_view(boy_names, pattern = common_ending,   match = TRUE)
# Match with alternate endings
by_parts <- or("Je", "Geo") %R% "ff" %R% or("ry", "ery", "rey", "erey")
str_view(boy_names,   pattern = by_parts,   match = TRUE)
# Match names that start with Cath or Kath
ckath <- START %R% or("C", "K") %R% "ath"
str_view(girl_names, pattern = ckath, match = TRUE)

# Lecture 5
# Create character class containing vowels
vowels <- char_class("Aa", "Ee", "Ii", "Oo", "Uu")
# Print vowels
vowels
# See vowels in x with str_view()
x # [1] "grey sky"      "gray elephant"
str_view(x, pattern = vowels)
# See vowels in x with str_view_all()
str_view_all(x, pattern = vowels)
# Number of vowels in boy_names
num_vowels <- str_count(boy_names, pattern = vowels)
mean(num_vowels)
# Proportion of vowels in boy_names
name_length <- str_length(boy_names)
mean(num_vowels/name_length)
